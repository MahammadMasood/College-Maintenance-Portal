{% extends 'base.html' %}
{% load static %}

{% block content %}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Quotation Batches | College Maintenance Portal</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
</head>

<body class="d-flex flex-column min-vh-100" style="background:#f8f9fa;">
  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg navbar-dark" style="background:#003366;">
    <div class="container">
      <a class="navbar-brand fw-bold" href="{% url 'admin_dashboard' %}">College Maintenance Portal</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navCollapse">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navCollapse">
        <ul class="navbar-nav ms-auto align-items-center">
          <li class="nav-item">
            <a class="nav-link" href="{% url 'admin_dashboard' %}">Dashboard</a>
          </li>

          <li class="nav-item">
            <a class="nav-link active" href="{% url 'principal_view_quotations' %}">View Quotations</a>
          </li>

          <li class="nav-item">
            <a class="nav-link" href="{% url 'reports' %}">Reports</a>
          </li>

          <li class="nav-item ms-2">
            <form method="post" action="{% url 'logout' %}">
              {% csrf_token %}
              <button class="btn btn-warning btn-sm fw-semibold">Logout</button>
            </form>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- MAIN CONTENT -->
  <main class="container my-4 flex-grow-1">
    <h3 class="text-center mb-3">Quotation Batches</h3>

    {% if batches %}
      <div class="table-responsive">
        <table class="table table-bordered table-hover align-middle text-center shadow-sm">
          <thead class="table-dark">
            <tr>
              <th>ID</th>
              <th>Token</th>
              <th>Requests</th>
              <th>Created</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for batch in batches %}
            <tr>
              <td>{{ batch.id }}</td>
              <td>{{ batch.token }}</td>
              <td>{{ batch.requests }}</td>
              <td>{{ batch.created_at|date:"d M Y, H:i" }}</td>
              <td>
                <a href="{% url 'principal_view_quotations_batch' batch.id %}" class="btn btn-primary btn-sm">
                  View Quotations
                </a>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <p class="text-center text-muted mt-4">No quotation batches yet.</p>
    {% endif %}
  </main>

  <!-- FOOTER -->
  <footer class="text-center text-white py-3 mt-auto" style="background:#003366;">
    <p class="mb-0">Masood | Musthak | Rithwik | Akshay | Milan</p>
    <small>Â© Tech Mavericks | All Rights Reserved</small>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
{% endblock %}
